<!DOCTYPE html>
<html lang="ptBR" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
	layout:decorator="base/base">

<head>
<title>Ofertas | Alocação Professores</title>

<link th:href="@{/plugins/sweetalert/sweetalert.css}" rel="stylesheet"
	type="text/css"></link>
	
<link th:href="@{/css/alocacao_professores.css}" rel="stylesheet"
	type="text/css"></link>
</head>

<section layout:fragment="conteudo">
	<div class="row bg-title">
		<div class="col-lg-3 col-md-4 col-sm-4 col-xs-12">
			<h4 class="page-title">Ofertas</h4>
		</div>
		<div class="col-lg-9 col-sm-8 col-md-8 col-xs-12">
			<a th:href="@{/ofertas/cadastrar}"
				class="btn btn-success pull-right m-l-20 btn-rounded hidden-xs hidden-sm waves-effect waves-light"><i
				class="fa fa-plus" aria-hidden="true"></i> Nova</a>
		</div>
		<div class="col-lg-12 col-sm-12 col-md-12 col-xs-12">
			<a id="btn-modal-importar-ofertas"
				class="btn btn-info pull-right m-l-20 btn-rounded hidden-xs hidden-sm waves-effect waves-light"><i
				class="fa fa-history" aria-hidden="true"></i> Importar</a>
		</div>
	</div>

	<div id="ofertas" class="page-wrapper"></div>

	<div class="row">
     	<div class="col-sm-12">
           <form class="form-inline" action="#">
               <div class="form-group">
                 <select id="select-curso" class="form-control" onchange="carregarOfertas()">
                       <option
                       th:each="curso : ${cursos}"
                       th:text="${curso.nome}"
                       th:value="${curso.id}"
                       th:selected="${ curso.coordenador.id == #authentication.principal.id }">
                       </option>
                   </select>
               </div>
           </form>
        </div>
     </div>
	<div id="tabela-fragment"></div>

	<div class="modal fade" id="modal-importar-ofertas">
		<div class="modal-dialog modal-lg" role="document">
			<div class="modal-content modal-resultado-ofertas">
				<div class="modal-header modal-border">
					<h5 class="modal-title">Importação de Ofertas</h5>
					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body modal-border">
					<div class="row">
						<div class="col-md-6">
							<label>Selecione o semestre</label> <select id="periodo"
								class="form-control">
								<option th:value="0">Selecione o semestre..</option>
								<option th:each="p : ${periodos}"
									th:text="${p.semestre.descricao} +' semestre de ' + ${p.ano}"
									th:value="${p.id}"></option>
							</select>
						</div>
					</div>

					<br />
					<div class="row col-md-6" id="resultado-ofertas-1"></div>
					<div class="row col-md-6" id="resultado-ofertas-2"></div>
					<div class="row col-md-12" id="sem-resultado-ofertas"></div>

					<br />
					<div class="row">
						<div class="col-md-12">
							<button class="btn btn-info pull-right" id="btn-exibir-ofertas">Exibir
								ofertas</button>
						</div>
					</div>



				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-inverse waves-effect waves-light"
						data-dismiss="modal">Fechar</button>
					<button type="button" class="btn btn-success"
						id="btn-importar-ofertas">Importar</button>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="modal-substituir-ofertas">
		<div class="modal-dialog modal-lg" role="document">
			<div class="modal-content modal-resultado-ofertas">
				<div class="modal-header modal-border">
					<strong class="modal-title">Substituição de Ofertas</strong>
					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body modal-border">
					<div class="row">
						<div class="col-md-12 msg-substituicao">
							<p>As ofertas abaixo já estão disponibilizadas para
								o período atual, selecione quais ofertas gostaria de realizar
								uma substituição.</p>
						</div>
					</div>
					<br />
					<div class="row">
						<div class="row col-md-6" id="resultado-substituicao-ofertas-1">
						</div>
						<div class="row col-md-6" id="resultado-substituicao-ofertas-2">
						</div>
					</div>

					<br />
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-inverse waves-effect waves-light"
						data-dismiss="modal" id="btn-fechar-substituicao">Fechar</button>
					<button type="button" class="btn btn-success"
						id="btn-substituir-ofertas">Substituir</button>
				</div>
			</div>
		</div>
	</div>

</section>

<section layout:fragment="js">
	<script th:src="@{/plugins/datatables/jquery.dataTables.min.js}"></script>
	<script th:src="@{/js/ordenacao-tabela.js}"></script>
	<script th:src="@{/js/oferta/oferta.js}"></script>
	<script type="text/javascript">
		var url = '/ofertas/curso/' + $('#select-curso').val();
	    $("#tabela-fragment").load(url);
		
		function carregarOfertas() {
		    var url = '/ofertas/curso/' + $('#select-curso').val();
		    $("#tabela-fragment").load(url);
		}
	</script>
</section>

</html>